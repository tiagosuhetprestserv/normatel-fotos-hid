function compartilharFoto() {
  canvas.toBlob(async blob => {
    const agora = new Date();
    const dataHora = agora.toLocaleString('pt-BR').replace(/[\/: ]/g, "_");
    const file = new File([blob], `foto_${dataHora}.png`, { type: "image/png" });

    const texto = localizacao.textContent + "\nðŸ•’ " + agora.toLocaleString('pt-BR');

    if (navigator.canShare && navigator.canShare({ files: [file] })) {
      try {
        await navigator.share({
          title: "EvidÃªncia com GPS",
          text: texto,
          files: [file]
        });
      } catch (err) {
        alert("Erro ao compartilhar: " + err);
      }
    } else {
      alert("Compartilhamento com arquivos nÃ£o Ã© suportado neste navegador. Tente baixar a imagem e compartilhar manualmente.");
    }
  }, 'image/png');
}
